NPCOfferLabel < Label
  anchors.left: prev.right
  anchors.top: prev.top
  margin-left: -30
  text-auto-resize: true

NPCItemBox < UICheckBox
  color: #aaaaaa
  text-align: left
  background-color: #595959
  opacity: 1
  text-offset: 45  2
  @onCheckChange: modules.game_npctrade.onItemBoxChecked(self)

  Item
    id: item
    phantom: true
    anchors.top: parent.top
    anchors.left: parent.left 
    opacity: 1
    margin-top: 1
    margin-left: 0

  $checked on:
    background-color: #adacac
    color: white
    opacity: 0.80
    
  $!checked:
    color: #aaaaaa

  $!on:
    color: #aaaaaa88


MiniWindow
  id: npcWindow
  !text: tr('NPC Trade')
  size: 200 430
  icon-rect: 4 4 18 18
  icon: image/trade
  text-align: topLeft
  &save: true
  focusable: true
  auto-focus: first
  @onClose: modules.game_npctrade.onMiniWindowClose()

  MiniWindowContents    
    padding-left: -10
    padding-right: -10
    focusable: true

    Item
      id: currancyIDitem
      anchors.top: parent.top
      anchors.left: parent.left
      margin-left: 90
      margin-top: 8 

    Label
      !text: tr('Currency') .. ':'
      anchors.left: parent.left
      anchors.top: parent.top
      text-auto-resize: true
      margin-top: 5
      margin-left: 15

    Label
      !text: tr('Gold Coin')
      anchors.left: parent.left
      anchors.top: parent.top
      text-auto-resize: true
      margin-top: 25
      margin-left: 15    

    TabButton
      id: buyTab
      !tooltip: tr("List of items that you're able to buy")
      !text: tr('Buy')
      size: 40 20
      checked: true
      on: true
      anchors.right: parent.right
      anchors.top: parent.top
      margin-top: 5
      margin-right: 15

    TabButton
      id: sellTab
      !tooltip: tr("List of items that you're able to sell")
      !text: tr('Sell')
      size: 40 20
      anchors.right: buyTab.right
      anchors.top: buyTab.bottom
      margin-right: -0

    Panel
      height: 200
      width: 180
      anchors.left: parent.left
      anchors.top: prev.bottom
      margin-top: 5
      margin-left: 14

      VerticalScrollBar
        id: itemsPanelListScrollBar
        height: 200
        anchors.top: prev.bottom
        anchors.right: parent.right
        margin-right: 15
        step: 24
        pixels-scroll: true

      ScrollablePanel
        id: itemsPanel
        height: 200
        anchors.left: parent.left
        anchors.right: prev.left
        anchors.top: parent.top
        anchors.bottom: parent.bottom
        vertical-scrollbar: itemsPanelListScrollBar
        layout:
          type: grid
          cell-size: 200 35
          auto-spacing: true   

    TextEdit
      id: searchText
      anchors.left: parent.left
      anchors.top: parent.top
      width: 165
      margin-left: 15
      margin-top: 255
      focusable: true
      placeholder: Type to search
      @onTextChange: modules.game_npctrade.onSearchTextChange()     

    FlatPanel
      id: setupPanel
      height: 70
      width: 170
      enabled: false
      anchors.left: parent.left
      anchors.top: prev.bottom
      margin-top: 10
      margin-left: 10
      image-color: #ffffff88 
  
      Label
        !text: tr('Price') .. ':'
        anchors.left: parent.left
        anchors.top: parent.top
        margin-top: 5
        margin-left: 5
        width: 85

      NPCOfferLabel
        id: price
        margin-left: -50

      Label
        !text: tr('Gold:') .. ':'
        anchors.left: parent.left
        anchors.top: prev.bottom
        margin-top: 5
        margin-left: 5
        width: 85

      NPCOfferLabel
        id: money
        margin-left: -50

      HorizontalScrollBar
        id: quantityScroll
        anchors.left: parent.left
        anchors.right: parent.right
        anchors.top: prev.bottom
        margin-top: 10
        margin-left: 5
        margin-right: 5
        show-value: true
        minimum: 1
        maximum: 100
        step: 1
        @onValueChange: modules.game_npctrade.onQuantityValueChange(self:getValue())

    FlatPanel
      id: buyOptions
      height: 35
      width: 170
      anchors.left: parent.left
      anchors.top: prev.bottom
      margin-top: 5
      margin-left: 10
      image-color: #ffffff88

      CheckBox
        id: buyWithBackpack
        !text: tr('Buy with back')
        anchors.top: parent.top
        anchors.left: parent.left
        anchors.right: parent.right
        margin-left: 5
        margin-top: 3
        @onCheckChange: modules.game_npctrade.onBuyWithBackpackChange()

      CheckBox
        id: ignoreCapacity
        !text: tr('Ig capacity')
        anchors.top: prev.bottom
        anchors.left: parent.left
        anchors.right: parent.right
        margin-left: 5
        margin-top: 3
        @onCheckChange: modules.game_npctrade.onIgnoreCapacityChange()

      CheckBox
        id: ignoreEquipped
        !text: tr('Ig equipped')
        anchors.top: parent.top
        anchors.left: parent.left
        anchors.right: parent.right
        margin-left: 5
        margin-top: 3
        visible: false
        checked: true
        @onCheckChange: modules.game_npctrade.onIgnoreEquippedChange()

      CheckBox
        id: showAllItems
        !text: tr('Show all items')
        anchors.top: prev.bottom
        anchors.left: parent.left
        anchors.right: parent.right
        margin-left: 5
        margin-top: 3
        visible: false
        checked: true
        @onCheckChange: modules.game_npctrade.onShowAllItemsChange()

      Button
        id: tradeButton
        !text: tr('OK')
        width: 50
        height: 20
        anchors.right: parent.right
        anchors.bottom: parent.bottom
        margin-right: 10
        margin-bottom: 10
        @onClick: modules.game_npctrade.onTradeClick()

  ResizeBorder
    id: bottomResizeBorder
    anchors.bottom: parent.bottom
    anchors.left: parent.left
    anchors.right: parent.right
    height: 3
    minimum: 48
    margin-left: 3
    margin-right: 3
    background: #ffffff88    
  
